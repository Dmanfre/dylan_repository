count() %>%
arrange(desc(n))
division_one_md %>%
group_by(team) %>%
count() %>%
arrange(desc(n))
teams_md_players_22_23 <- division_one_md %>%
group_by(team) %>%
count() %>%
arrange(desc(n))
from_maryland_p5 %>%
group_by(team) %>%
count() %>%
arrange(desc(n))
d1_state_counts <- wbb_rosters_22_23 %>%
filter(division == "I") %>%
group_by(state_clean) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
View(d1_state_counts)
d1_state_counts_22_23 <- wbb_rosters_22_23 %>%
filter(division == "I") %>%
group_by(state_clean) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
rm(list="d1_state_counts")
# D1 state counts
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(state_clean) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
wbb_rosters_23_24 %>%
group_by(high_school) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
View(high_schools)
#players at HS
division_one_md %>%
filter(hs_clean == "Oxon Hills HS")
high_schools <- division_one_md %>%
group_by(hs_clean) %>%
count() %>%
arrange(desc(n))
#players at HS
division_one_md %>%
filter(hs_clean == "Oxon Hill HS")
divisions_and_teams <- wbb_rosters_22_23 %>% select(team, division)
View(divisions_and_teams)
wbb_rosters_23_24_with_divisions <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
View(wbb_rosters_23_24_with_divisions)
# D1 state counts
wbb_rosters_23_24 %>%
filter(division == "I")
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
# D1 state counts
wbb_rosters_23_24 %>%
filter(division == "I")
# D1 state counts
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(high_school) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
# D1 state counts
wbb_rosters_23_24 %>%
filter(division == "I", cleaned_state == "MD") %>%
group_by(high_school) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
wbb_rosters_23_24 %>%
filter(division == "I", cleaned_state == "MD") %>%
group_by(team) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
# D1 state counts
wbb_rosters_23_24 %>%
group_by(clean_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players_from_md = n)
View(wbb_rosters_23_24)
# D1 state counts
wbb_rosters_23_24 %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players_from_md = n)
# D1 state counts
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
# D1 state counts
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "II") %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "III") %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state) %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "I", cleaned_state == "MD") %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_22_23 %>%
filter(division == "I", cleaned_state == "MD") %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_22_23 %>%
filter(division == "I", state_clean == "MD") %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "I", state_clean == "MD") %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 %>%
filter(division == "I", cleaned_state == "MD") %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
states_non_standard <- pm_append(type = "state", input = c("SD.", "MASS", "CALIF", "MICH", "NEB", "IND", "MINN", "ORE", "OHIO", "FLA", "MISS", "TENN", "ARIZ", "KAN", "ALA", "OKLA", "WIS", "ILL", " WASH", "ARK", "COLO", "NEV", "CONN", "WISC", "WVA", "DEL", "WYO", "CALI", "LOUIS", "VIRG", "MONT", "PENN", "TEX", "KANS", "NEBR", "IDA", "COL"), output = c("SD", "MA", "CA", "MI", "NE", "IN", "MN", "OR", "OH", "FL", "MS", "TN", "AZ", "KS", "AL", "OK", "WI", "IL", "WA", "AR", "CO", "NV", "CT", "WI", "WV", "DE", "WY", "CA", "LA", "VA", "MT", "PA", "TX", "KS", "NE", "ID", "CO"), locale = "us")
dict <- pm_dictionary(type='state', case = c("title", "upper", "lower"), append = states_non_standard)
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% pm_identify(var="hometown_cleaned")
parsed <- wbb_rosters_23_24 %>%
pm_identify(var="hometown_cleaned") %>%
pm_prep(var="hometown_cleaned", type="street") %>%
pm_state_parse(dict)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, parsed, by="pm.uid")
wbb_rosters_23_24 %>%
filter(is.na(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% separate(hometown, c('hometown', 'homestate'), sep=',', extra='merge')
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% mutate(homestate=str_trim(homestate), homestate=str_replace(homestate, '\\.', '')) %>%
mutate(homestate = case_when(is.na(abbr2state(homestate)) ~ homestate, TRUE ~ (abbr2state(homestate))))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
rename(cleaned_city = pm.address,
cleaned_state = pm.state)
knitr::opts_chunk$set(echo = TRUE)
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD")
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)
#install.packages("ipumsr")
library(ipumsr)
#install.packages("usdata")
library(usdata)
#install.packages("postmastr")
#install.packages("remotes")
#remotes::install_github("slu-openGIS/postmastr")
library(postmastr)
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD")
view(all_divison_md_players)
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD") %>%
select(team, confernece, name, year_clean, position_clean, hs_clean)
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD") %>%
select(team, conference, name, year_clean, position_clean, hs_clean)
view(all_divison_md_players)
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD") %>%
select(team, name, year_clean, position_clean, height_clean, hs_clean, conference)
view(all_divison_md_players)
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD") %>%
select(team, name, year_clean, position_clean, height_clean, hs_clean, division, conference)
view(all_divison_md_players)
all_divison_md_players <- write_csv(all_divison_md_players, "data/all_divison_md_players.csv")
all_divison_md_players <-  wbb_rosters_22_23 %>%
filter(state_clean == "MD") %>%
select(team, name, year_clean, position_clean, height_clean, hometown_clean, hs_clean, division, conference)
all_divison_md_players <- write_csv(all_divison_md_players, "data/all_divison_md_players.csv")
view(all_divison_md_players)
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
states_non_standard <- pm_append(type = "state", input = c("SD.", "MASS", "CALIF", "MICH", "NEB", "IND", "MINN", "ORE", "OHIO", "FLA", "MISS", "TENN", "ARIZ", "KAN", "ALA", "OKLA", "WIS", "ILL", " WASH", "ARK", "COLO", "NEV", "CONN", "WISC", "WVA", "DEL", "WYO", "CALI", "LOUIS", "VIRG", "MONT", "PENN", "TEX", "KANS", "NEBR", "IDA", "COL"), output = c("SD", "MA", "CA", "MI", "NE", "IN", "MN", "OR", "OH", "FL", "MS", "TN", "AZ", "KS", "AL", "OK", "WI", "IL", "WA", "AR", "CO", "NV", "CT", "WI", "WV", "DE", "WY", "CA", "LA", "VA", "MT", "PA", "TX", "KS", "NE", "ID", "CO"), locale = "us")
dict <- pm_dictionary(type='state', case = c("title", "upper", "lower"), append = states_non_standard)
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% pm_identify(var="hometown_cleaned")
parsed <- wbb_rosters_23_24 %>%
pm_identify(var="hometown_cleaned") %>%
pm_prep(var="hometown_cleaned", type="street") %>%
pm_state_parse(dict)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, parsed, by="pm.uid")
wbb_rosters_23_24 %>%
filter(is.na(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% separate(hometown, c('hometown', 'homestate'), sep=',', extra='merge')
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% mutate(homestate=str_trim(homestate), homestate=str_replace(homestate, '\\.', '')) %>%
mutate(homestate = case_when(is.na(abbr2state(homestate)) ~ homestate, TRUE ~ (abbr2state(homestate))))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
rename(cleaned_city = pm.address,
cleaned_state = pm.state)
view(wbb_rosters_23_24)
view(wbb_rosters_22_23)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, divisions_and_teams, by = "height_ft")
wbb_rosters_23_24 %>%
mutate(division)
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
states_non_standard <- pm_append(type = "state", input = c("SD.", "MASS", "CALIF", "MICH", "NEB", "IND", "MINN", "ORE", "OHIO", "FLA", "MISS", "TENN", "ARIZ", "KAN", "ALA", "OKLA", "WIS", "ILL", " WASH", "ARK", "COLO", "NEV", "CONN", "WISC", "WVA", "DEL", "WYO", "CALI", "LOUIS", "VIRG", "MONT", "PENN", "TEX", "KANS", "NEBR", "IDA", "COL"), output = c("SD", "MA", "CA", "MI", "NE", "IN", "MN", "OR", "OH", "FL", "MS", "TN", "AZ", "KS", "AL", "OK", "WI", "IL", "WA", "AR", "CO", "NV", "CT", "WI", "WV", "DE", "WY", "CA", "LA", "VA", "MT", "PA", "TX", "KS", "NE", "ID", "CO"), locale = "us")
dict <- pm_dictionary(type='state', case = c("title", "upper", "lower"), append = states_non_standard)
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% pm_identify(var="hometown_cleaned")
parsed <- wbb_rosters_23_24 %>%
pm_identify(var="hometown_cleaned") %>%
pm_prep(var="hometown_cleaned", type="street") %>%
pm_state_parse(dict)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, parsed, by="pm.uid")
wbb_rosters_23_24 %>%
filter(is.na(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% separate(hometown, c('hometown', 'homestate'), sep=',', extra='merge')
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% mutate(homestate=str_trim(homestate), homestate=str_replace(homestate, '\\.', '')) %>%
mutate(homestate = case_when(is.na(abbr2state(homestate)) ~ homestate, TRUE ~ (abbr2state(homestate))))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
rename(cleaned_city = pm.address,
cleaned_state = pm.state)
view(wbb_rosters_23_24)
view(wbb_rosters_22_23)
#players at HS
division_one_md %>%
filter(hs_clean == "Bishop McNamara")
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
states_non_standard <- pm_append(type = "state", input = c("SD.", "MASS", "CALIF", "MICH", "NEB", "IND", "MINN", "ORE", "OHIO", "FLA", "MISS", "TENN", "ARIZ", "KAN", "ALA", "OKLA", "WIS", "ILL", " WASH", "ARK", "COLO", "NEV", "CONN", "WISC", "WVA", "DEL", "WYO", "CALI", "LOUIS", "VIRG", "MONT", "PENN", "TEX", "KANS", "NEBR", "IDA", "COL"), output = c("SD", "MA", "CA", "MI", "NE", "IN", "MN", "OR", "OH", "FL", "MS", "TN", "AZ", "KS", "AL", "OK", "WI", "IL", "WA", "AR", "CO", "NV", "CT", "WI", "WV", "DE", "WY", "CA", "LA", "VA", "MT", "PA", "TX", "KS", "NE", "ID", "CO"), locale = "us")
dict <- pm_dictionary(type='state', case = c("title", "upper", "lower"), append = states_non_standard)
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% pm_identify(var="hometown_cleaned")
parsed <- wbb_rosters_23_24 %>%
pm_identify(var="hometown_cleaned") %>%
pm_prep(var="hometown_cleaned", type="street") %>%
pm_state_parse(dict)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, parsed, by="pm.uid")
wbb_rosters_23_24 %>%
filter(is.na(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% separate(hometown, c('hometown', 'homestate'), sep=',', extra='merge')
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% mutate(homestate=str_trim(homestate), homestate=str_replace(homestate, '\\.', '')) %>%
mutate(homestate = case_when(is.na(abbr2state(homestate)) ~ homestate, TRUE ~ (abbr2state(homestate))))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
rename(cleaned_city = pm.address,
cleaned_state = pm.state)
view(wbb_rosters_23_24)
view(wbb_rosters_22_23)
knitr::opts_chunk$set(echo = TRUE)
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)
#install.packages("ipumsr")
library(ipumsr)
#install.packages("usdata")
library(usdata)
#install.packages("postmastr")
#install.packages("remotes")
#remotes::install_github("slu-openGIS/postmastr")
library(postmastr)
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
states_non_standard <- pm_append(type = "state", input = c("SD.", "MASS", "CALIF", "MICH", "NEB", "IND", "MINN", "ORE", "OHIO", "FLA", "MISS", "TENN", "ARIZ", "KAN", "ALA", "OKLA", "WIS", "ILL", " WASH", "ARK", "COLO", "NEV", "CONN", "WISC", "WVA", "DEL", "WYO", "CALI", "LOUIS", "VIRG", "MONT", "PENN", "TEX", "KANS", "NEBR", "IDA", "COL"), output = c("SD", "MA", "CA", "MI", "NE", "IN", "MN", "OR", "OH", "FL", "MS", "TN", "AZ", "KS", "AL", "OK", "WI", "IL", "WA", "AR", "CO", "NV", "CT", "WI", "WV", "DE", "WY", "CA", "LA", "VA", "MT", "PA", "TX", "KS", "NE", "ID", "CO"), locale = "us")
dict <- pm_dictionary(type='state', case = c("title", "upper", "lower"), append = states_non_standard)
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% pm_identify(var="hometown_cleaned")
parsed <- wbb_rosters_23_24 %>%
pm_identify(var="hometown_cleaned") %>%
pm_prep(var="hometown_cleaned", type="street") %>%
pm_state_parse(dict)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, parsed, by="pm.uid")
wbb_rosters_23_24 %>%
filter(is.na(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% separate(hometown, c('hometown', 'homestate'), sep=',', extra='merge')
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% mutate(homestate=str_trim(homestate), homestate=str_replace(homestate, '\\.', '')) %>%
mutate(homestate = case_when(is.na(abbr2state(homestate)) ~ homestate, TRUE ~ (abbr2state(homestate))))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
rename(cleaned_city = pm.address,
cleaned_state = pm.state)
view(wbb_rosters_23_24)
view(wbb_rosters_22_23)
divisions_and_teams %>%
distinct()
divisions_and_teams <-divisions_and_teams %>%
distinct()
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
View(wbb_rosters_23_24)
View(usa_2022)
View(wbb_rosters_23_24_with_divisions)
View(wbb_rosters_23_24)
wbb_rosters_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
mutate(hometown_cleaned = str_to_upper(str_replace(hometown, "\\.",""))) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"/.*","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"\\.$","")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,",",", ")) %>%
mutate(hometown_cleaned = str_replace(hometown_cleaned,"-"," ")) %>%
mutate(hometown_cleaned = str_squish(hometown_cleaned))
states_non_standard <- pm_append(type = "state", input = c("SD.", "MASS", "CALIF", "MICH", "NEB", "IND", "MINN", "ORE", "OHIO", "FLA", "MISS", "TENN", "ARIZ", "KAN", "ALA", "OKLA", "WIS", "ILL", " WASH", "ARK", "COLO", "NEV", "CONN", "WISC", "WVA", "DEL", "WYO", "CALI", "LOUIS", "VIRG", "MONT", "PENN", "TEX", "KANS", "NEBR", "IDA", "COL"), output = c("SD", "MA", "CA", "MI", "NE", "IN", "MN", "OR", "OH", "FL", "MS", "TN", "AZ", "KS", "AL", "OK", "WI", "IL", "WA", "AR", "CO", "NV", "CT", "WI", "WV", "DE", "WY", "CA", "LA", "VA", "MT", "PA", "TX", "KS", "NE", "ID", "CO"), locale = "us")
dict <- pm_dictionary(type='state', case = c("title", "upper", "lower"), append = states_non_standard)
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% pm_identify(var="hometown_cleaned")
parsed <- wbb_rosters_23_24 %>%
pm_identify(var="hometown_cleaned") %>%
pm_prep(var="hometown_cleaned", type="street") %>%
pm_state_parse(dict)
wbb_rosters_23_24 <- left_join(wbb_rosters_23_24, parsed, by="pm.uid")
wbb_rosters_23_24 %>%
filter(is.na(hometown_cleaned))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% separate(hometown, c('hometown', 'homestate'), sep=',', extra='merge')
wbb_rosters_23_24 <- wbb_rosters_23_24 %>% mutate(homestate=str_trim(homestate), homestate=str_replace(homestate, '\\.', '')) %>%
mutate(homestate = case_when(is.na(abbr2state(homestate)) ~ homestate, TRUE ~ (abbr2state(homestate))))
wbb_rosters_23_24 <- wbb_rosters_23_24 %>%
rename(cleaned_city = pm.address,
cleaned_state = pm.state)
view(wbb_rosters_23_24)
view(wbb_rosters_22_23)
divisions_and_teams <-divisions_and_teams %>%
distinct()
wbb_rosters_23_24 <- inner_join(wbb_rosters_23_24, divisions_and_teams, by = "team")
View(wbb_rosters_23_24)
rm(list= "wbb_rosters_23_24_with_divisons")
rm(list= "wbb_rosters_23_24_with_divisions")
View(wbb_rosters_23_24)
knitr::opts_chunk$set(echo = TRUE)
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)
#install.packages("ipumsr")
library(ipumsr)
#install.packages("usdata")
library(usdata)
#install.packages("postmastr")
#install.packages("remotes")
#remotes::install_github("slu-openGIS/postmastr")
library(postmastr)
wbb_rosters_23_24 %>%
filter(division == "I", cleaned_state == "MD") %>%
count() %>%
arrange(desc(n)) %>%
rename(players = n)
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(state_clean) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
view(d1_state_counts_23_24)
view(d1_state_counts_23_24)
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
view(d1_state_counts_23_24)
view(d1_state_counts_23_24)
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
wbb_rosters_23_24 %>%
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
#libraries
library(tidyverse)
View(wbb_rosters_23_24)
wbb_rosters_23_24 %>%
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
wbb_rosters_23_24 %>%
wbb_rosters_23_24 %>%
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
wbb_rosters_23_24 %>%
wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
d1_state_counts_23_24 <- wbb_rosters_23_24 %>%
filter(division == "I") %>%
group_by(cleaned_state) %>%
count() %>%
rename(number_of_players = n) %>%
arrange(desc(number_of_players))
division_one_md_23_24 <- wbb_rosters_23_24 %>%
filter(state_clean == "MD", division == "I")
division_one_md_23_24 <- wbb_rosters_23_24 %>%
filter(cleaned_state == "MD", division == "I")
View(division_one_md_23_24)
divisions_and_teams <-divisions_and_teams %>%
distinct()
View(divisions_and_teams)
high_schools_23_24 <- division_one_md_23_24 %>%
group_by(hs_clean) %>%
count() %>%
arrange(desc(n))
high_schools_23_24 <- division_one_md_23_24 %>%
group_by(high_school) %>%
count() %>%
arrange(desc(n))
view(high_schools_23_24)
