---
title: "newark_housing"
author: "Dylan Manfre"
date: "2023-06-26"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)
#install.packages("ipumsr")
library(ipumsr)


```

```{r}
# Load Census API key

Sys.setenv(CENSUS_API_KEY = "5cb2b9c628a1d1329c5bf4d36fe4435c6501efc8", overwrite = TRUE)

# is using acs 5'
#when writing this make it say that these numbers are based on five-year rolling averages...

```

```{r}

nj_cities <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "NJ")


```


```{r}


#Reference tables

#Load ACS crosswalk

ACS_2021 <- load_variables(2021, "acs5")
ACS_2018 <- load_variables(2018, "acs5")
ACS_2013 <- load_variables(2018, "acs5")
ACS_2010 <- load_variables(2010, "acs5")
ACS_2009 <- load_variables(2009, "acs5")
ACS_2008 <- load_variables(2008, "acs3")
ACS_2007 <- load_variables(2007, "acs3")
```

```{r}
#housing metrics for Newark

Newark_2021 <- get_acs(geography = "place",
                variables = c(medi_house_income = "B19013_001", 
                            population = "B01003_001", 
                            medi_home_value = "B25077_001", 
                            housing_total = "B25002_001",
                            housing_occupied = "B25002_002",
                            housing_vacancies = "B25002_003", 
                            labor_total = "B23025_003", 
                            labor_employed = "B23025_004", 
                            labor_unemployed = "B23025_005",
                            rent = "B25064_001",
                            real_estate_tax_median = "B25103_001"),
              survey = "acs5",
              state = "NJ",
              year = 2021) %>% 
  filter(NAME == "Newark city, New Jersey") %>% 
  mutate(year = 2021)


Newark_2019 <- get_acs(geography = "place",
                variables = c(medi_house_income = "B19013_001", 
                            population = "B01003_001", 
                            medi_home_value = "B25077_001", 
                            housing_total = "B25002_001",
                            housing_occupied = "B25002_002",
                            housing_vacancies = "B25002_003", 
                            labor_total = "B23025_003", 
                            labor_employed = "B23025_004", 
                            labor_unemployed = "B23025_005",
                            rent = "B25064_001",
                            real_estate_tax_median = "B25103_001"),
              survey = "acs5",
              state = "NJ",
              year = 2019) %>% 
  filter(NAME == "Newark city, New Jersey") %>% 
  mutate(year = 2019)

Newark_2015 <- get_acs(geography = "place",
                variables = c(medi_house_income = "B19013_001", 
                            population = "B01003_001", 
                            medi_home_value = "B25077_001", 
                            housing_total = "B25002_001",
                            housing_occupied = "B25002_002",
                            housing_vacancies = "B25002_003", 
                            labor_total = "B23025_003", 
                            labor_employed = "B23025_004", 
                            labor_unemployed = "B23025_005",
                            rent = "B25064_001",
                            real_estate_tax_median = "B25103_001"),
              survey = "acs5",
              state = "NJ",
              year = 2015) %>% 
  filter(NAME == "Newark city, New Jersey") %>% 
  mutate(year = 2015)


#Set this up using the hagerstown dataset for rents


```

